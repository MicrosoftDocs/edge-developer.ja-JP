---
description: サービス ワーカーの管理とデバッグに [サービス ワーカー] パネルを使用する
title: DevTools - デバッガー - サービス ワーカー
author: MSEdgeTeam
ms.author: msedgedevrel
ms.topic: article
ms.prod: microsoft-edge
keywords: microsoft edge, Web 開発, f12 ツール, devtools, デバッガー, デバッグ, pwa, サービス ワーカー, キャッシュ API
ms.custom: seodec18
ms.date: 11/19/2020
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: 99592f787da8bcf89d2e16231aa3f39047b4fc0b
ms.sourcegitcommit: a35a6b5bbc21b7df61d08cbc6b074b5325ad4fef
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/17/2020
ms.locfileid: "11234812"
---
# サービス ワーカー

[ **サービス ワーカー] パネル** には、サイトのサービス ワーカーを管理およびデバッグするためのツールが備え付けられているので、次の作業を行えます。

 - サイトに関連付けられているすべてのサービス ワーカーの概要と、そのスコープと状態の詳細を取得する
 - **指定した** スコープのサービス**ワーカー登録**を更新および管理 (登録解除) する
 - **テスト** 通知をプッシュする
 - **停止** /**個々**のサービス ワーカーを開始し、
 - **選択** したサービス ワーカーを別のデバッガー ウィンドウで検査する

![[サービス ワーカーの概要] ウィンドウ](./media/service_worker.png)

Edge DevTools でのサービス ワーカー デバッグについては、次の点に注意してください。

 - サービス ワーカーは複数のタブで共有できるので、サービス ワーカーをデバッグすると、ページのツールとは別に DevTools の新しいインスタンスが起動します。
 - 要素[**と**](./elements.md)[**エミュレーション**](./emulation.md)パネルは、サービス ワーカーがバックグラウンドで実行され、アプリのフロントエンドを直接制御しなことを考えると、サービス ワーカー デバッガーから離れたものになります。
 - 現在、サービス ワーカーのネットワーク トラフィックは、そのワーカーの DevTools デバッグ インスタンスからのみ報告され、ページ自体のデバッガー インスタンスからのみ報告されます。
 - DevTools**からのプッシュ**をシミュレートするには、プッシュ イベント リスナーをサービス** ワーカーに追加して、その効果を確認する必要があります。 次の例では、サービス ワーカー コンソールに "DevTools からのプッシュ メッセージのテスト" を出力 **します**。

   ```JavaScript
   self.addEventListener('push', function(event){
       console.log(event.data.text());
   });
   ```

サービス ワーカーを使用する際に注意する必要がある一般的な情報を次に示します。

- **HTTPS のみ。** サービス ワーカーは HTTP では動作しません。HTTPS を使用する必要があります。 ただし、テスト目的でサービス ワーカー `localhost` を登録できます。

- **DOM へのアクセスは許可されません。** Web ワーカーと同様に、ページのオブジェクト モデルにはアクセスできない。 つまり、ページに関する情報を変更する必要がある場合は、ページから DOM の変更を処理できるよう、サービス ワーカーからページに使用する [`postMessage`](https://developer.mozilla.org/docs/Web/API/Worker/postMessage) 必要があります。

- **ページとは別に実行されます。** これらのスクリプトはページの有効期間に結び付けないので、ページと同じコンテキストを共有しないという点を理解することが重要です。 (前に説明したように) DOM にアクセスできないのを除き、ページで使用可能な変数にはアクセスできません。

- **アプリ キャッシュ *を上書きします*。** サービス ワーカーが使用されている場合、アプリ キャッシュは無視されます。 サービス ワーカー API は、Web 開発者によりきめ細かく制御することで、アプリ キャッシュを完全に取り替えることを目的とします。

  - **スクリプトを CDN 上に設定できない。** サービス ワーカー用の JavaScript ファイルは、コンテンツ配布ネットワーク (CDN) でホストできないので、ページと同じドメイン上にある必要があります。 ただし、必要に合う場合は、CDN からスクリプトをインポートできます。

- **いつでも終了できます。** サービス ワーカーは有効期間が短く、その有効期間はイベントに結び付きます。 特に、サービス ワーカーには、イベント ハンドラーの実行を完了する必要がある時間制限があります。 それ以外の場合、ブラウザーまたはオペレーティング システムは、バッテリ、CPU、またはメモリ消費量に影響を与えるサービス ワーカーを終了する場合があります。 どちらの場合も、処理される後続のイベントで別のサービス ワーカー インスタンスが使用される場合は、サービス ワーカー スクリプトのグローバル変数に依存しないようにします。

- **許可されるのは非同期要求のみです。** ここでは同期 XHR を使用できます。 どちらも localStorage ではないので、IndexedDB と前述の新しいキャッシュ API を利用するのが最善です。

- **スコープが 1:1 のサービス ワーカー。** スコープごとに 1 つのサービス ワーカーしか持てない。 つまり、サービス ワーカーが既に存在するスコープに別のサービス ワーカーを登録すると、そのサービス ワーカーが更新されます。
