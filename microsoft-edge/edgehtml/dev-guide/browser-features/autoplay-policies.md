---
description: サイト上のメディア コンテンツが意図した通り動作することを確認する
title: 自動再生ポリシー - 開発者ガイド
author: MSEdgeTeam
ms.author: msedgedevrel
ms.topic: article
ms.prod: microsoft-edge
keywords: edge, メディア, ビデオ, オーディオ, 自動再生
ms.custom: seodec18
ms.date: 11/19/2020
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: 85b91a8b87d73d6fccc6eac2aa64513f283d7f21
ms.sourcegitcommit: a35a6b5bbc21b7df61d08cbc6b074b5325ad4fef
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/17/2020
ms.locfileid: "11234636"
---
# 自動再生ポリシー  

[!INCLUDE [deprecation-note](../../includes/legacy-edge-note.md)]  

Microsoft Edge は、Web 上の注意をそらす操作を最小限に抑え、帯域幅を節約するために、メディアをサウンドで自動再生する Web サイトで閲覧設定をカスタマイズする機能をユーザーに提供します。  さらに、Microsoft Edge では、バックグラウンド タブでのメディアの自動再生が自動的に抑制されます。  

ユーザーは、グローバル自動再生コントロール[](#global-media-autoplay-settings)とサイト[](#per-site-media-autoplay-settings)ごとの自動再生コントロールの両方を使用してメディアの動作をカスタマイズできます。これらのコントロールには、次のオプションがあります。  

*   `Allow`  既定では、サイトの判断で、タブが最初にフォアグラウンドで表示された時点で引き続きビデオを再生します。  

*   `Limit`  ビデオがミュートされている場合にのみ、自動再生を機能に制限します。そのため、ユーザーがサウンドに驚かされるのは決してではありません。  ユーザーがページ上の任意の場所をクリックすると、自動再生が再び有効にされ、そのタブ内のそのドメイン内で引き続き許可されます。  

*   `Block`  ユーザーがメディア コンテンツを直接操作するまで、すべてのサイトで自動再生を防止します。  

## グローバル メディアの自動再生の設定  

ユーザーは、[メディアの自動再生の詳細設定] で、すべてのサイトの**既定の**自動再生  >  **動作を制御できます**。  

:::image type="complex" source="../media/autoplay_global.png" alt-text="グローバル メディアの自動再生の設定" lightbox="../media/autoplay_global.png":::
   グローバル メディアの自動再生の設定  
:::image-end:::  

## サイトごとのメディア自動再生の設定  

ユーザーは、Web サイト情報ウィンドウの [Web サイト**** のアクセス許可] セクションで、サイトごとに自動再生動作を制御できます。  この設定は、アドレス バーの左側にある情報アイコンまたはロック アイコンをクリックし、メディアの自動再生設定を**** クリックして開始することで確認できます。  

サイトごとの設定は、グローバル設定より優先されます。  たとえば、ユーザーのグローバル設定が設定されているが、サイトごとの設定が変更された場合、そのサイトの自動再生 `Allow` `Block` はブロックされます。  

:::image type="complex" source="../media/autoplay_per-site.png" alt-text="サイトごとのメディア自動再生の設定" lightbox="../media/autoplay_per-site.png":::
   サイトごとのメディア自動再生の設定  
:::image-end:::  

## Web 開発者向けのベスト プラクティス  

サイトでホストされているメディアで優れたユーザー エクスペリエンスを確保する方法を次に示します。  

*   メディア要素を使うごとに、ユーザー ジェスチャで再生を開始する必要がある (ユーザーが任意の時点で自動再生をブロックできる\) と想定し、必要に応じて計画します。  グローバルおよびサイトごとの自動再生ポリシーは、サイトでの使い方に関係なく、すべての要素 `<audio>` `<video>` に適用されます。  

*   メディア コントロールがサイト メディアと広告コンテンツの両方に常に存在する必要があります。  これにより、ページで自動再生がブロックされている場合に、再生を再開できます。  

*   自動再生が Web サイトでのユーザーのエクスペリエンスに与える影響を評価し、不要なメディア再生を最小限に抑える方法で自動再生の使用を検討します。  自動再生がエクスペリエンスの重要な部分である場合は、ミュートされたコンテンツを使用して開始し、ユーザーがミュートを解除できるようにすることを検討してください。  ミュートされたコンテンツを自動再生するには、オーディオ ソースを明示的にミュートするか、設定しない必要があります。  それ以外の場合、要素はミュートとは見なされません。  

*   特に必要でない限り、メディア再生にはネイティブ ブラウザー コントロールを使います。  これにより、ユーザーの一貫したエクスペリエンスが保証されます。  カスタム コントロールを作成する場合は、メディア コントロールが常に存在し、コントロールが自動再生の抑制に適切に対応する必要があります。  

### Iframe 委任  

自動再生では、コンテンツの生成元に関係なく、親ページから自動再生 `<iframe>` のアクセス許可が継承されます。  各メディア ファイルが個別の iframe でホストされているプレイリストのシナリオでは、ユーザーは再生リスト全体に対して再生を 1 回だけ開始する必要があります。  

### 自動再生が許可されている場合の検出  

メディア要素の関数によって返される promise を調べることで、自動再生がブロックされた場合に正しい状態を表示するために再生コントロール `play()` を調整できます。  

```javascript
var promise = document.querySelector('video').play();

if (promise !== undefined) { 
    promise.catch(_error => { 
        // Autoplay was blocked
        // Show user media controls to manually start playback
    }).then(() => { 
        // Autoplay started
    }); 
}
```  
