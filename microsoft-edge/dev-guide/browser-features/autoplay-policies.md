---
description: サイトのメディアコンテンツが意図したとおりに動作することを確認する
title: 開発ガイド-自動再生ポリシー
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 9/17/2018
ms.topic: article
ms.prod: microsoft-edge
keywords: edge、メディア、ビデオ、音声、自動再生
ms.custom: seodec18
ms.openlocfilehash: 397c6f0a22359dbfab7c44370b0429147b7c9834
ms.sourcegitcommit: 6860234c25a8be863b7f29a54838e78e120dbb62
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/09/2020
ms.locfileid: "10568835"
---
# 自動再生ポリシー

Microsoft Edge では、web 上の集中を最小限に抑え、帯域幅を節約するために、メディアを自動再生する web サイトの閲覧の設定をカスタマイズすることができます。 さらに、Microsoft Edge では、バックグラウンドタブでのメディアの自動再生が自動的に抑制されます。

ユーザーは、[グローバル](#global-media-autoplay-settings)および[サイトごと](#per-site-media-autoplay-settings)の再生コントロールの両方でメディア動作をカスタマイズできます。これにより、次のオプションが提供されます。

- [**許可**] は既定の設定であり、サイトの判断でタブがフォアグラウンドで最初に表示されたときに、引き続きビデオを再生します。

- [**制限**] は、ビデオがミュートになっている場合にのみ、自動再生を有効にします。そのため、ユーザーはサウンドで驚かされることはありません。 ユーザーがページ上の任意の場所をクリックすると、自動再生が再び有効になり、そのタブのそのドメイン内で引き続き許可されます。

- **ブロック**を使うと、ユーザーが直接メディアコンテンツを操作するまで、すべてのサイトの自動再生が禁止されます。

## グローバルメディア自動再生設定

ユーザーは、[ **Advanced Setting**  >  **メディア自動再生**の詳細設定] の下にあるすべてのサイトの既定の自動再生動作を制御できます。

![グローバルメディア自動再生設定](../media/autoplay_global.png)

## サイト単位のメディア自動再生設定

ユーザーは、[web サイトの情報] ウィンドウの [ **Web サイトの権限**] セクションで、サイトごとに自動再生の動作を制御できます。 この設定を確認するには、アドレスバーの左側にある情報アイコンまたはロックアイコンをクリックし、「メディア自動再生設定」をクリックして開始します。

サイトごとの設定では、グローバル設定が上書きされます。 たとえば、ユーザーのグローバル設定が "許可" に設定されている場合、サイトごとの設定を "ブロック" に変更すると、そのサイトでは自動再生がブロックされます。

![サイト単位のメディア自動再生設定](../media/autoplay_per-site.png)
 
## Web 開発者向けのベストプラクティス

次に、サイトでホストされているメディアを使用して良好なユーザーエクスペリエンスを実現する方法について説明します。

- メディア要素を使用する場合、再生を開始するにはユーザーのジェスチャが必要です (任意の時点で自動再生をブロックすることができます)。それに応じて計画してください。  グローバルおよびサイトごとの自動再生ポリシー `<audio>` `<video>` は、サイトでの使用方法に関係なく、すべての要素と要素に適用されます。

- メディアコントロールがサイトメディアと広告コンテンツの両方に常に表示されるようにします。 これにより、ページで自動再生がブロックされた場合に、再生を再開することができます。

- 自動再生が web サイト上のユーザーエクスペリエンスに与える影響を評価し、不要なメディアの再生を最小化する方法で自動再生を使用することを検討します。 自動再生がエクスペリエンスの重要な部分である場合は、ミュートされたコンテンツの使用を開始し、ユーザーがミュートを解除できるようにすることを検討してください。 ミュートされたコンテンツを自動再生するには、オーディオソースを明示的にミュートにするか、設定しないようにする必要があります。 そうしないと、要素はミュートと見なされません。

- 特に必要でない限り、メディアの再生にはネイティブブラウザーコントロールを使用します。 これにより、一貫したエクスペリエンスをユーザーに提供できます。 代わりにカスタムコントロールを作成する場合は、メディアコントロールが常に存在し、コントロールが自動再生抑制に適切に反応することを確認します。

### Iframe の委任

の自動再生 `<iframe>` は、コンテンツの出所に関係なく、親ページから自動再生のアクセス許可を継承します。 各メディアファイルが個別の iframe でホストされている再生リストシナリオでは、ユーザーは再生リスト全体の再生を1回だけ開始する必要があります。

### 自動再生が許可されているかを検出する

再生コントロールを調整して、自動再生がブロックされたときに正しい状態が表示されるようにするには、次のようにし `play()` ます。

```Javascript

var promise = document.querySelector('video').play();

if (promise !== undefined) { 
    promise.catch(_error => { 
        // Autoplay was blocked
        // Show user media controls to manually start playback
    }).then(() => { 
        // Autoplay started
    }); 
}

```
