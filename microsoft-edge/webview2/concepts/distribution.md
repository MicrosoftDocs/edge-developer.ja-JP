---
description: Microsoft Edge WebView2 を使用してアプリをリリースするときの配布オプション
title: Microsoft Edge WebView2 アプリケーションの配布
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 09/21/2020
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2、IWebView2WebView、webview2、webview、wpf アプリ、wpf、edge、ICoreWebView2、ICoreWebView2Host、browser control、edge html
ms.openlocfilehash: 7db610ff1133b1b5b380372422f1f2f10981e583
ms.sourcegitcommit: 24151cc65bad92d751a8e7a868c102e1121456e3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/22/2020
ms.locfileid: "11052187"
---
# <span data-ttu-id="8ba9a-104">WebView2 を使用したアプリケーションの配布</span><span class="sxs-lookup"><span data-stu-id="8ba9a-104">Distribution of applications using WebView2</span></span>  

<span data-ttu-id="8ba9a-105">WebView2 アプリケーションを配布するときには、アプリが起動される前に、バッキング web プラットフォーム- [WebView2 Runtime](#understanding-the-webview2-runtime) が存在することを確認してください。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-105">When distributing your WebView2 application, make sure the backing web platform - the [WebView2 Runtime](#understanding-the-webview2-runtime) is present before the app starts.</span></span>  <span data-ttu-id="8ba9a-106">この記事では、開発者が WebView2 ランタイムをインストールする方法について説明し、WebView2 アプリケーション用の2つの配布モードを使用する方法について説明します。  [Evergreen](#evergreen-distribution-mode) と [Fixed バージョン](#fixed-version-distribution-mode)。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-106">This article describes how developers can install the WebView2 Runtime, and use the two distribution modes for your WebView2 application:  [Evergreen](#evergreen-distribution-mode) and [Fixed Version](#fixed-version-distribution-mode).</span></span>  

## <span data-ttu-id="8ba9a-107">Evergreen 配布モード</span><span class="sxs-lookup"><span data-stu-id="8ba9a-107">Evergreen distribution mode</span></span>  

> [!NOTE]
> <span data-ttu-id="8ba9a-108">ほとんどの開発者は、Evergreen 配布モードをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-108">The Evergreen distribution mode is recommended for most developers.</span></span>  

<span data-ttu-id="8ba9a-109">Evergreen 配布モードでは、アプリが最新の機能とセキュリティ更新プログラムを利用していることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-109">The Evergreen distribution mode ensures that your app is taking advantage of the latest features and security updates.</span></span>  <span data-ttu-id="8ba9a-110">次のような特徴があります。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-110">It has the following characteristics.</span></span>  

*   <span data-ttu-id="8ba9a-111">基礎となる web プラットフォーム \ (WebView2 Runtime) は、開発者による追加の作業を行わなくても自動的に更新されます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-111">The underlying web platform \(WebView2 Runtime\) updates automatically without additional effort from developers.</span></span>  
*   <span data-ttu-id="8ba9a-112">Evergreen 配布モードを使うすべてのアプリケーションでは、Evergreen WebView2 ランタイムの共有コピーを使用します。これにより、ディスク領域を節約できます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-112">All applications that use the Evergreen distribution mode use a shared copy of the Evergreen WebView2 Runtime, which saves disk space.</span></span>  

### <span data-ttu-id="8ba9a-113">WebView2 ランタイムについて</span><span class="sxs-lookup"><span data-stu-id="8ba9a-113">Understanding the WebView2 Runtime</span></span>  

<span data-ttu-id="8ba9a-114">WebView2 Runtime は再配布可能なランタイムであり、WebView2 アプリケーションのバッキング web プラットフォームとして機能します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-114">WebView2 Runtime is a re-distributable runtime and serves as the backing web platform for WebView2 applications.</span></span>  <span data-ttu-id="8ba9a-115">この概念は、C++/.NET アプリの VC + + または .NET ランタイムに似ています。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-115">This concept is similar to VC++ or .NET Runtime for C++/.NET apps.</span></span>  <span data-ttu-id="8ba9a-116">このように、ランタイムは、アプリケーションに合わせて微調整された Microsoft Edge \ (Chromium \) バイナリを変更します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-116">Under the hood, the Runtime is modified Microsoft Edge \(Chromium\) binaries that are fine-tuned and tested for applications.</span></span>  <span data-ttu-id="8ba9a-117">ランタイムは、インストール時にユーザーに表示されるブラウザーとしては表示されません。たとえば、ユーザーはブラウザーのデスクトップショートカットまたはスタートメニューエントリを持っていません。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-117">The Runtime won't appear as a user-visible browser upon installation, for example, users won't have a browser desktop shortcut or start menu entry.</span></span>  

<span data-ttu-id="8ba9a-118">開発とテストのために、開発者は、このランタイム、またはバッキング web プラットフォーム用の非安定した Microsoft Edge \ (Chromium \) ブラウザーチャネルを使用できます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-118">For development and testing, developers may use the Runtime or any non-stable Microsoft Edge \(Chromium\) browser channel for the backing web platform.</span></span>  <span data-ttu-id="8ba9a-119">運用環境では、開発者は、アプリケーションを起動する前に、ユーザーデバイスにランタイムが存在することを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-119">In production environments, developers must ensure the Runtime is present on user devices before the application starts.</span></span>  <span data-ttu-id="8ba9a-120">アプリが運用環境のブラウザーに依存しないようにするために、Microsoft Edge の WebView2 の使用はできません。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-120">The Microsoft Edge Stable channel is unavailable for WebView2 usage to prevent apps from taking a dependency on the browser in production.</span></span>  

<span data-ttu-id="8ba9a-121">開発者は、次の理由により、ブラウザーに依存しないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-121">Developers must not take a dependency on the browser because:</span></span>  

*   <span data-ttu-id="8ba9a-122">Microsoft Edge \ (Chromium \) は、すべてのユーザーデバイスに存在することが保証されていません。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-122">Microsoft Edge \(Chromium\) isn't guaranteed to be present on all user devices.</span></span>  <span data-ttu-id="8ba9a-123">たとえば、Windows Update から切断された、または Microsoft によって直接管理されていないデバイス (Enterprise/EDU market の大部分) には、ブラウザーが含まれていないことがあります。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-123">For example, devices disconnected from Windows Update or not managed by Microsoft directly \(a large portion of the Enterprise/EDU market\) may not have the browser.</span></span>  <span data-ttu-id="8ba9a-124">開発者に WebView2 ランタイムの配布を許可することで、アプリの前提条件として、ブラウザーに依存することを回避できます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-124">Allowing developers to distribute the WebView2 Runtime avoids taking a dependency on the browser as a pre-requisite for apps.</span></span>
*   <span data-ttu-id="8ba9a-125">ブラウザーやアプリにはさまざまなユースケースがあるため、ブラウザーで依存関係を取得すると、アプリに意図しない副次的な影響が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-125">Browsers and apps have different use cases, and so taking a dependency on a browser may have unintended side-effects on your apps.</span></span>  <span data-ttu-id="8ba9a-126">たとえば、IT 管理者は、内部の web サイトとの互換性を維持するためにブラウザーをバージョン管理することができます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-126">For example, IT admins may version-control the browser for internal website compatibility.</span></span>  <span data-ttu-id="8ba9a-127">WebView2 Runtime を使用すると、ブラウザーの更新がアクティブに管理されている間、アプリは evergreen を維持できます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-127">WebView2 Runtime allows apps to stay evergreen while browser updates are being actively managed.</span></span>  
*   <span data-ttu-id="8ba9a-128">ブラウザーとは異なり、ランタイムはアプリケーションシナリオ向けに開発およびテストされていますが、場合によっては、ブラウザーでまだバグ修正が用意されていないことがあります。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-128">As opposed to the browser, the Runtime is developed and tested for application scenarios and in some cases may include bug fixes not yet available in the browser.</span></span>  

<span data-ttu-id="8ba9a-129">Evergreen WebView2 Runtime は、Windows の将来のリリースで受信トレイを出荷する予定です。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-129">The Evergreen WebView2 Runtime is planned to ship inbox in future releases of Windows.</span></span>  <span data-ttu-id="8ba9a-130">ランタイムをより汎用的に使用できるようにするには、開発者が実行している運用アプリケーションと共にランタイムを展開することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-130">Before the Runtime becomes more universally available, developers are recommended to deploy the Runtime along with their production application.</span></span>  

### <span data-ttu-id="8ba9a-131">Evergreen WebView2 ランタイムの展開</span><span class="sxs-lookup"><span data-stu-id="8ba9a-131">Deploying the Evergreen WebView2 Runtime</span></span>  

<span data-ttu-id="8ba9a-132">デバイス上のすべての Evergreen アプリには、1つの Evergreen WebView2 ランタイムのインストールのみが必要です。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-132">Only one installation of the Evergreen WebView2 Runtime is needed for all Evergreen apps on the device.</span></span>  <span data-ttu-id="8ba9a-133">[WebView2 runtime ダウンロードページ][Webview2Installer]には、次のような Evergreen ランタイムを展開するための開発者のために、いくつかのツールが用意されています。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-133">There are a number of tools available on the [WebView2 Runtime download page][Webview2Installer] to help developers deploy the Evergreen Runtime, such as:</span></span>  

*   <span data-ttu-id="8ba9a-134">WebView2 Runtime ブートストラップ \ (まもなくリリースされます) は、わずか \ (約 2 MB \ 2 MB) のインストーラーです。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-134">WebView2 Runtime Bootstrapper \(to be released soon\) is a tiny \(approximately 2 MB\) installer.</span></span>  <span data-ttu-id="8ba9a-135">このインストーラーは、ユーザーのデバイスアーキテクチャと一致する Microsoft サーバーから Evergreen ランタイムをダウンロードしてインストールします。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-135">This installer downloads and installs the Evergreen Runtime from Microsoft servers that matches the user's device architecture.</span></span>  
*   <span data-ttu-id="8ba9a-136">ブートストラップをダウンロードするためのリンク (すぐにリリースされる) は、ブートストラップをプログラムでダウンロードするための開発者向けのリンクです。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-136">Link to download the Bootstrapper \(to be released soon\) is a link for developers to programmatically download the bootstrapper.</span></span>
*   <span data-ttu-id="8ba9a-137">WebView2 Runtime Standalone Installer は、オフライン環境で Evergreen WebView2 ランタイムをインストールできる完全なインストーラーです。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-137">WebView2 Runtime Standalone Installer is a full installer that can install the Evergreen WebView2 Runtime in offline environments.</span></span>  

<span data-ttu-id="8ba9a-138">現時点では、ブートストラップとスタンドアロンインストーラーは両方ともコンピューターごとにインストールをサポートします。昇格が必要です。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-138">Currently, both the bootstrapper and standalone installer only support per-machine install, which requires elevation.</span></span>  <span data-ttu-id="8ba9a-139">昇格せずに実行すると、Windows ユーザーアカウント制御プロンプトが表示され、ユーザーにアクセス許可の昇格を要求します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-139">When run without elevation, a Windows User Account Control prompt appears to ask users to elevate permissions.</span></span>  

<span data-ttu-id="8ba9a-140">アプリケーションが起動される前にランタイムが既にインストールされていることを確認するために、次のワークフローをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-140">We recommend the following workflows to ensure the Runtime is already installed before your application launches.</span></span>  <span data-ttu-id="8ba9a-141">シナリオによっては、ワークフローを調整できます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-141">You may adjust your workflow depending on your scenario.</span></span>  <span data-ttu-id="8ba9a-142">また、将来のサンプルコードも提供します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-142">We'll also provide sample code in the future.</span></span>  

#### <span data-ttu-id="8ba9a-143">オンラインのみの展開</span><span class="sxs-lookup"><span data-stu-id="8ba9a-143">Online-only deployment</span></span>  

<span data-ttu-id="8ba9a-144">エンドユーザーがインターネット接続を使用すると見なされるオンラインのみの展開シナリオがある場合は、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-144">If you have an online-only deployment scenario where end users are assumed to have internet access, perform the following steps:</span></span>  

*   <span data-ttu-id="8ba9a-145">アプリケーションのセットアップ中に、次のいずれかの方法でランタイムが既にインストールされているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-145">During your application setup, check if the Runtime is already installed by either:</span></span>  
    *   <span data-ttu-id="8ba9a-146">`pv (REG_SZ)`、のいずれかでレジストリキーが存在するかどう `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}` かを調べます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-146">Inspecting if regkey `pv (REG_SZ)` exists under `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}`, or</span></span>  
    *   <span data-ttu-id="8ba9a-147">WebView2 API [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) を呼び出して、VERSIONINFO が NULL であるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-147">Calling WebView2 API [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) and check whether the versionInfo is NULL.</span></span>  
*   <span data-ttu-id="8ba9a-148">ランタイムがインストールされていない場合は、リンクを使用してブートストラップをプログラムでダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-148">If the Runtime isn't installed, use the link to programmatically download the bootstrapper.</span></span>  
*   <span data-ttu-id="8ba9a-149">昇格したプロセスまたはコマンドプロンプトから、 `MicrosoftEdgeWebview2Setup.exe /silent /install` サイレントインストールのためにブートストラップを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-149">Invoke the bootstrapper from an elevated process or command prompt with `MicrosoftEdgeWebview2Setup.exe /silent /install` for silent install.</span></span>  

<span data-ttu-id="8ba9a-150">このワークフローでは、必要な場合にのみランタイムをインストールすることができます。そのためには、インストーラーをパッケージ化したり、ユーザーデバイスのアーキテクチャを検出したりする必要はありません。また、ランタイムをサイレントモードでインストールすることもできます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-150">This workflow ensures you install the Runtime only when it's needed, you're not required to package installers or detect the architecture of user devices, and can install the Runtime silently.</span></span>  <span data-ttu-id="8ba9a-151">必要に応じてブートストラップをプログラムでダウンロードする代わりに、アプリケーションと共にパッケージ化することもできます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-151">You may also choose to package the bootstrapper with your application instead of programmatically downloading it on demand.</span></span>  

#### <span data-ttu-id="8ba9a-152">オフライン展開</span><span class="sxs-lookup"><span data-stu-id="8ba9a-152">Offline deployment</span></span>  

<span data-ttu-id="8ba9a-153">アプリの展開がオフラインで動作する場合は、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-153">If you have an offline deployment scenario where app deployment has to work entirely offline, perform the following steps:</span></span>  

*   <span data-ttu-id="8ba9a-154">[スタンドアロンインストーラー][Webview2Installer]をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-154">Download the [standalone installer][Webview2Installer].</span></span>  
*   <span data-ttu-id="8ba9a-155">アプリケーションのインストーラーまたはアップデーターにインストーラーを含めます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-155">Include the installer in your application installer or updater.</span></span>  
*   <span data-ttu-id="8ba9a-156">アプリケーションのセットアップ中に、次のいずれかの方法でランタイムが既にインストールされているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-156">During your application setup, check if the Runtime is already installed by either:</span></span>  
    *   <span data-ttu-id="8ba9a-157">`pv (REG_SZ)`、のいずれかでレジストリキーが存在するかどう `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}` かを調べます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-157">Inspecting if regkey `pv (REG_SZ)` exists under `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}`, or</span></span>  
    *   <span data-ttu-id="8ba9a-158">WebView2 API [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) を呼び出して、VERSIONINFO が NULL であるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-158">Calling WebView2 API [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) and check whether the versionInfo is NULL.</span></span>  
*   <span data-ttu-id="8ba9a-159">ランタイムがインストールされていない場合は、昇格されたプロセスまたはコマンドプロンプトから、サイレントインストールのためにスタンドアロンインストーラーを起動し `MicrosoftEdgeWebView2RuntimeInstaller{X64/X86/ARM64}.exe /silent /install` ます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-159">If the Runtime isn't installed, invoke the standalone installer from an elevated process or command prompt with `MicrosoftEdgeWebView2RuntimeInstaller{X64/X86/ARM64}.exe /silent /install` for silent install.</span></span>  

## <span data-ttu-id="8ba9a-160">固定バージョンの配布モード</span><span class="sxs-lookup"><span data-stu-id="8ba9a-160">Fixed Version distribution mode</span></span>  

> [!NOTE]
> <span data-ttu-id="8ba9a-161">修正されたバージョンの配布モードはまだ使用できません。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-161">The Fixed Version distribution mode is not available yet.</span></span>  

<span data-ttu-id="8ba9a-162">制約のある環境の場合は、以前のバージョンの配布モードという名前の固定されたバージョンをサポートする予定です。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-162">For constrained environments, there are plans to support a Fixed Version, previously named bring-your-own, distribution mode.</span></span>  <span data-ttu-id="8ba9a-163">修正済みのバージョンの配布モードでは、開発者は WebView2 ランタイムの特定のバージョンを選択してパッケージ化することができます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-163">The Fixed Version distribution mode allows developers to select and package a specific version of the WebView2 Runtime.</span></span>  <span data-ttu-id="8ba9a-164">修正されたバージョンの配布モードでは、どのバージョンの WebView2 ランタイムをアプリケーションで使うか、ユーザーコンピューターが更新されるタイミングを制御することができます。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-164">The Fixed Version distribution mode allows you to control which version of the WebView2 Runtime is used by your application, and when user machines are updated.</span></span>  <span data-ttu-id="8ba9a-165">固定バージョンの配布モードでは、自動更新は提供されません。開発者は、更新プログラムを適用することを計画しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ba9a-165">The Fixed Version distribution mode doesn't receive any automatic updates, and developers should plan to apply updates themselves.</span></span>  


<!-- links -->  

[ConceptsVersioning]: ./versioning.md "ブラウザーのバージョンと WebView2 についてMicrosoft ドキュメント"  
[ReferenceWin3209622WebviewIdl]: ../reference/win32/0-9-622/webview2-idl.md  "Globals |Microsoft ドキュメント"  

[Webview2Installer]: https://developer.microsoft.com/microsoft-edge/webview2 "WebView2 Installer"  
