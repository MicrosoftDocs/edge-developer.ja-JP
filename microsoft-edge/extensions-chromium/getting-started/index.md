---
description: Chromium の拡張機能と、拡張機能を構築するための基本的な概念について説明します。
title: Microsoft Edge (Chromium) Extensions の概念とアーキテクチャ
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 10/01/2020
ms.topic: conceptual
ms.prod: microsoft-edge
keywords: edge-chromium、web 開発、html、css、javascript、開発者、拡張機能
ms.openlocfilehash: 8ffdd19e1a1e36a4d10fdd80bd7dd5654d543527
ms.sourcegitcommit: 845a0d53a86bee3678f421adee26b3372cefce57
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/08/2020
ms.locfileid: "11104729"
---
# <span data-ttu-id="c54f9-104">拡張機能の概念とアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="c54f9-104">Extension concepts and architecture</span></span>

<span data-ttu-id="c54f9-105">この記事では、拡張機能を構築するときに役立つ概念について簡単に説明します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-105">This article provides a brief introduction to concepts that help when building extensions.</span></span> <span data-ttu-id="c54f9-106">Microsoft Edge \ (Chromium \) の拡張機能を理解するために、まず、複数のタブがあるブラウザーのしくみについて説明します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-106">To understand Microsoft Edge \(Chromium\) extensions, we first discuss how multi-tab browsers work.</span></span>


## <span data-ttu-id="c54f9-107">ブラウザーの動作を理解する</span><span class="sxs-lookup"><span data-stu-id="c54f9-107">Understand how browsers work</span></span>

<span data-ttu-id="c54f9-108">次のリストは、拡張機能を構築する前に理解しておくと便利な情報をまとめたものです。</span><span class="sxs-lookup"><span data-stu-id="c54f9-108">The following list outlines helpful information to understand before building your extension.</span></span>

1.  <span data-ttu-id="c54f9-109">各ブラウザータブは、他のすべてのタブから分離されます。 各タブは、他のブラウザーのタブやスレッドから分離された独自のスレッドで実行されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-109">Each browser tab is isolated from every other tab.  Each tab runs in its own thread that's isolated from other browser tabs and threads.</span></span>

    ![[ブラウザー] タブごとに1つのスレッド](media/index-image1-browsertabs.png)  

2.  <span data-ttu-id="c54f9-111">各タブは1つの GET 要求を処理します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-111">Each tab handles one GET request.</span></span>  <span data-ttu-id="c54f9-112">各タブは URL を使用して1つのデータストリームを取得します。これは通常、HTML ドキュメントです。</span><span class="sxs-lookup"><span data-stu-id="c54f9-112">Each tab uses a URL to get a single stream of data, which is normally an HTML document.</span></span>  <span data-ttu-id="c54f9-113">この単一のストリームまたはページには、JavaScript にはタグ、画像参照、CSS 参照などの命令が含まれています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-113">That single stream or page, includes instructions like JavaScript include tags, image references, CSS references, and more.</span></span>  <span data-ttu-id="c54f9-114">すべてのリソースが1つのタブページにダウンロードされ、ページがタブに表示されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-114">All resources are downloaded to that one tab page, and then the page is rendered in the tab.</span></span>  

3.  <span data-ttu-id="c54f9-115">各タブとリモートサーバー間で通信が行われます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-115">Communication occurs between each tab and remote servers.</span></span>  <span data-ttu-id="c54f9-116">各タブは、分離環境で実行されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-116">Each tab runs in an isolated environment.</span></span> <span data-ttu-id="c54f9-117">インターネットに接続されていますが、他のタブから分離されています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-117">They're still connected to the internet but they're isolated from other tabs.</span></span>  <span data-ttu-id="c54f9-118">タブでは、JavaScript を実行してサーバーと通信することができます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-118">Tabs may run JavaScript to communicate with servers.</span></span> <span data-ttu-id="c54f9-119">これらのサーバーは、タブの URL バーに入力された最初の GET 要求の送信元サーバーです。</span><span class="sxs-lookup"><span data-stu-id="c54f9-119">These servers are the originating server for the first GET request that was entered into the URL bar of the tab.</span></span>  

4.  <span data-ttu-id="c54f9-120">拡張モデルでは、別の通信モデルが使用されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-120">The extension model uses a different communication model.</span></span>  <span data-ttu-id="c54f9-121">タブページと同様に、拡張機能は、すべてのタブページのスレッドから分離された個々のスレッドで実行されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-121">Similar to tab pages, extensions run in individual threads that are isolated from all tab page threads.</span></span>  <span data-ttu-id="c54f9-122">タブでは、リモートサーバーに1つの GET 要求が発行されてから、ページがレンダリングされます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-122">Tabs issue single GET requests to remote servers, and then renders the page.</span></span> <span data-ttu-id="c54f9-123">ただし、extensions 関数はリモートサーバーに似ています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-123">However, extensions function similar to a remote server.</span></span> <span data-ttu-id="c54f9-124">ブラウザーに拡張機能をインストールすると、ブラウザーでスタンドアロンの web サーバーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-124">Installing extensions in your browser creates a standalone web server in the browser.</span></span> <span data-ttu-id="c54f9-125">拡張機能は、すべてのタブページから分離されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-125">The extension is isolated from all tab pages.</span></span>  

    ![拡張機能で異なる通信モデルを使用する](media/index-image3-upsidedown.png)  

## <span data-ttu-id="c54f9-127">拡張機能のアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="c54f9-127">Extension architecture</span></span>

<span data-ttu-id="c54f9-128">次のリストは、拡張機能のアーキテクチャに関連する、役に立つ情報をまとめたものです。</span><span class="sxs-lookup"><span data-stu-id="c54f9-128">The following list outlines helpful information as it relates to the architecture of an extension.</span></span>  

1.  <span data-ttu-id="c54f9-129">拡張機能の web サーバーバンドル。</span><span class="sxs-lookup"><span data-stu-id="c54f9-129">The Extension web server bundle.</span></span>  <span data-ttu-id="c54f9-130">拡張機能は、web リソースのバンドルです。</span><span class="sxs-lookup"><span data-stu-id="c54f9-130">An extension is a bundle of web resources.</span></span> <span data-ttu-id="c54f9-131">これらの web リソースは、web 開発者が web サーバーに公開する他のリソースに似ています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-131">These web resources are similar to other resources that web developers publish to web servers.</span></span> <span data-ttu-id="c54f9-132">開発者は、拡張機能を構築するときに、これらの web リソースを zip ファイルにバンドルします。</span><span class="sxs-lookup"><span data-stu-id="c54f9-132">Developers bundle these web resources into a zip file when building an extension.</span></span>
    
    <span data-ttu-id="c54f9-133">Zip ファイルには、HTML、CSS、JavaScript、およびイメージファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-133">The zip file includes HTML, CSS, JavaScript, and image files.</span></span>  <span data-ttu-id="c54f9-134">Zip ファイルのルートに必要な追加ファイルが1つあります。</span><span class="sxs-lookup"><span data-stu-id="c54f9-134">There's one additional file that is required in the root of the zip file.</span></span> <span data-ttu-id="c54f9-135">このファイルはマニフェストファイルで、という名前が付けられ `manifest.json` ます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-135">This file is the manifest file, and is named `manifest.json`.</span></span>  <span data-ttu-id="c54f9-136">これは拡張機能の青写真であり、拡張機能のバージョン、タイトル、実行するために必要なアクセス許可などが含まれます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-136">It's the blueprint of  your extension and includes the version of your extension, the title, permissions needed for the extension to run, and so on.</span></span>

2.  <span data-ttu-id="c54f9-137">拡張機能サーバーを起動しています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-137">Launching the extension server.</span></span>  <span data-ttu-id="c54f9-138">Web サーバーには web バンドルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-138">Web servers contain your web bundle.</span></span> <span data-ttu-id="c54f9-139">ブラウザーはサーバー上の Url に移動し、ブラウザーにレンダリングするためのファイルをダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="c54f9-139">Browsers navigate to URLs on the server, and download the file to render in the browser.</span></span> <span data-ttu-id="c54f9-140">ブラウザーは、証明書、構成ファイルなどを使用して移動します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-140">Browsers navigate using certificates, configuration files, and so on.</span></span>  <span data-ttu-id="c54f9-141">ファイルがある場合は `index.html` 、web サーバー上の特別な場所に保存されています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-141">If there's an `index.html` file, that's stored at a special location on the web server.</span></span>  

    <span data-ttu-id="c54f9-142">拡張機能を使用すると、ブラウザーのタブページは、拡張ランタイムを使って拡張機能の web バンドルになります。</span><span class="sxs-lookup"><span data-stu-id="c54f9-142">When we use extensions, the tab page of your browser gets to the web bundle of your extension using the extension runtime.</span></span>  <span data-ttu-id="c54f9-143">拡張ランタイムは、URL からのファイルを提供し `extension://{some-long-unique-identifier}/index.html` `{some-long-unique-identifier}` ます。ここでは、インストール時に拡張機能に割り当てられた一意の識別子を指定します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-143">The extension runtime serves the files from the URL `extension://{some-long-unique-identifier}/index.html`, where `{some-long-unique-identifier}` is a unique identifier assigned to the extension when it's installed.</span></span>  <span data-ttu-id="c54f9-144">各拡張機能には、異なる一意の識別子が使用されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-144">Each extension uses a different unique identifier.</span></span> <span data-ttu-id="c54f9-145">各識別子は、ブラウザーにインストールされている web バンドルを指します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-145">Each identifier points to the web bundle that's installed in your browser.</span></span>   

3.  <span data-ttu-id="c54f9-146">拡張機能は、タブとブラウザーのツールバーと通信できます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-146">Extensions can communicate with tabs and the browser toolbar.</span></span>   <span data-ttu-id="c54f9-147">拡張機能は、ブラウザーのツールバーを操作できます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-147">Extensions can interact with the toolbar of your browser.</span></span> <span data-ttu-id="c54f9-148">各拡張機能は、実行されているタブページを別々のスレッドで管理します。各タブページの DOM 操作は分離されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-148">Each extension manages running tab pages in separate threads, and DOM manipulation on each tab page is isolated.</span></span>  <span data-ttu-id="c54f9-149">拡張機能は、extensions API を使って、拡張機能とタブページの間で通信します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-149">Extensions use the extensions API to communicate between the extension and tab pages.</span></span>  <span data-ttu-id="c54f9-150">この拡張 API には、通知管理、ストレージ管理などの追加機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-150">This extension API provides additional capabilities that include notification management, storage management, and so on.</span></span>  

    <span data-ttu-id="c54f9-151">Web サーバーの場合と同様に、ブラウザーが開かれているときに、拡張機能によって通知が待機します。</span><span class="sxs-lookup"><span data-stu-id="c54f9-151">Just like web servers, extensions wait on notifications when the browser is open.</span></span>  <span data-ttu-id="c54f9-152">拡張機能とタブページは、互いに分離されているスレッドで実行されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-152">Extensions and tab pages run in threads that are isolated from each other.</span></span> <span data-ttu-id="c54f9-153">ただし、開発者は、extensions API、およびマニフェストファイルのアクセス許可を使って、すべてのタブページで拡張機能を使用できるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-153">However, developers can use the extensions API, and permissions in the manifest file to allow an extension to work with any tab page.</span></span>  

4. <span data-ttu-id="c54f9-154">拡張機能には、インストール時のオプトインアクセス許可が用意されています。</span><span class="sxs-lookup"><span data-stu-id="c54f9-154">Extensions provide opt-in permissions at install time.</span></span>  <span data-ttu-id="c54f9-155">拡張子のアクセス許可は、ファイルの開発者によって指定され `manifest.json` ます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-155">Extension permissions are specified by the developer in the `manifest.json` file.</span></span> <span data-ttu-id="c54f9-156">拡張機能をインストールするときには、拡張機能の実行に必要なアクセス許可についての情報がユーザーに表示されます。</span><span class="sxs-lookup"><span data-stu-id="c54f9-156">When installing extensions, users are presented with information on the permissions that the extension needs to run.</span></span> <span data-ttu-id="c54f9-157">必要なアクセス許可の種類に基づいて、拡張機能によってブラウザーから情報が抽出されて使用されることがあります。</span><span class="sxs-lookup"><span data-stu-id="c54f9-157">Based on the type of permission required, the extension may extract and use information from the browser.</span></span>


## <span data-ttu-id="c54f9-158">次のステップ</span><span class="sxs-lookup"><span data-stu-id="c54f9-158">Next steps</span></span>

 <span data-ttu-id="c54f9-159">拡張機能の概要については、「 [拡張チュートリアルを作成][CreateAnExtensionPart1]する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c54f9-159">For information on getting started with extensions, see [Create an extension tutorial][CreateAnExtensionPart1].</span></span> 



<!-- image links -->  

<!-- links -->  

[CreateAnExtensionPart1]: ./part1-simple-extension.md "拡張チュートリアルを作成する-パート 1 |Microsoft ドキュメント"  