---
description: Service worker パネルを使用して、サービスワーカーの管理とデバッグを行う
title: DevTools-デバッガー-サービスワーカー
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 03/05/2020
ms.topic: article
ms.prod: microsoft-edge
keywords: microsoft edge、web 開発、f12 ツール、devtools、デバッガー、デバッグ、pwa、サービスワーカー、キャッシュ api
ms.custom: seodec18
ms.openlocfilehash: 8e1fa62358657a47ce40d0742f95a76f2586d0c8
ms.sourcegitcommit: 6860234c25a8be863b7f29a54838e78e120dbb62
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/09/2020
ms.locfileid: "10569659"
---
# サービス員

[ **Service worker** ] パネルには、次のことを支援するために、サイトのサービスワーカーを管理およびデバッグするためのツールが用意されています。

 - サイトに関連付けられているすべてのサービス担当者の概要と、それらのスコープと状態の詳細を把握する
 - 指定した範囲のサービスワーカーの登録を**更新**および管理する (**登録を解除**する)
 - テスト通知を**プッシュ**する
 - **停止** /個々のサービスワーカーを**開始**する
 - 別のデバッガーウィンドウで、選択したサービスワーカーを**検査**します。

![サービスワーカーの概要ウィンドウ](./media/service_worker.png)

エッジ DevTools でのサービスワーカーのデバッグについては、次の点に注意してください。

 - サービスワーカーをデバッグすると、複数のタブ間でサービスワーカーを共有できるため、ページのツールとは別に、DevTools の新しいインスタンスが起動されます。
 - サービスワーカーがバックグラウンドで実行されていて、アプリのフロントエンドを直接制御していない場合、サービスワーカーデバッガーから[**要素**](./elements.md)と[**エミュレーション**](./emulation.md)パネルは存在しません。
 - 現在、サービスワーカーのネットワークトラフィックは、そのワーカーの DevTools デバッグインスタンスからのみ報告され、ページ自体のデバッガーインスタンスからは報告されません。
 - DevTools からの**プッシュ**をシミュレートするには、その効果を監視するために、サービスワーカーに*プッシュ*イベントリスナーを追加する必要があります。 次の例では、サービスワーカー**コンソール**の devtools からのテストプッシュメッセージを印刷します。

   ```JavaScript
   self.addEventListener('push', function(event){
       console.log(event.data.text());
   });
   ```

サービスワーカーを使用する場合は、次の点に注意してください。

- **HTTPS のみ。** サービスワーカーは、HTTP では動作しません。HTTPS を使用する必要があります。 ただし、テスト目的でサービスワーカーを登録することはでき `localhost` ます。

- **DOM アクセスは許可されません。** Web ワーカーの場合と同様に、ページのオブジェクトモデルにアクセスすることはできません。 つまり、ページについて何かを変更する必要がある場合は、ページ [`postMessage`](https://developer.mozilla.org/docs/Web/API/Worker/postMessage) からの DOM の変更を処理できるように、サービスワーカーからページを使用する必要があります。

- **ページとは別に実行されます。** これらのスクリプトはページの有効期間に関連付けられていないため、ページと同じコンテキストを共有しないことを理解しておくことが重要です。 (前に説明したように) DOM へのアクセス権がないことを除けば、ページで利用可能な同じ変数にアクセスすることはできません。

- ***アプリのキャッシュ*を上書きします。** サービスワーカーが使用されている場合、アプリキャッシュは無視されます。 Service Worker API は、よりきめ細かいコントロールを web 開発者に提供することによって、アプリキャッシュを完全に supplant することを目的としています。

  - **スクリプトを CDN にすることはできません。** サービスワーカー用の JavaScript ファイルは、コンテンツ配信ネットワーク (CDN) でホストすることはできません。ページと同じドメインに存在している必要があります。 ただし、必要に応じて、CDN からスクリプトをインポートすることもできます。

- **いつでも終了できます。** サービスワーカーは、寿命が短く、有効期間がイベントに関連付けられていることを意味します。 特に、サービスワーカーには、イベントハンドラーの実行を終了する時間制限があります。 また、ブラウザーやオペレーティングシステムが、バッテリー、CPU、またはメモリの消費に影響を与えるサービスワーカーを終了することを選択する場合があります。 どちらの場合も、別のサービスワーカーインスタンスが処理されているイベントで使用される場合に備えて、サービスワーカースクリプトのグローバル変数に依存しないようにします。

- **非同期要求のみが許可されます。** 同期 XHR はここでは使用できません。 どちらも localStorage でもありません。したがって、IndexedDB と、前に説明した新しいキャッシュ API を使うことをお勧めします。

- **スコープへのサービスワーカーは1:1 です。** スコープごとに1つのサービスワーカーしか作成できません。 つまり、既にサービスワーカーを持っているスコープに対して別のサービスワーカーを登録しようとすると、そのサービスワーカーは更新されます。
